# Vena ETL Tool - Environment Variables

# Basic Authentication
VENA_USERNAME=your_username
VENA_PASSWORD=your_password
VENA_API_URL=https://us2.vena.io

# Default template (used by original import.js)
VENA_TEMPLATE_ID=template_id_for_single_imports

# API Retry Configuration
VENA_RETRY_ATTEMPTS=3        # Number of retry attempts for API calls
VENA_RETRY_BACKOFF=300       # Initial backoff time in milliseconds (doubles after each retry)

# Streaming Upload Configuration
VENA_UPLOAD_TIMEOUT=3600000  # Upload timeout in milliseconds (1 hour default)
VENA_PROGRESS_INTERVAL=30000 # Progress reporting interval in milliseconds (30 seconds default)
VENA_STREAM_CHUNK_SIZE=262144 # Stream chunk size in bytes (256KB default)
VENA_ABORT_ON_TIMEOUT=true   # Whether to abort uploads on timeout (default: true)

# Streaming Backpressure Settings (for large file uploads)
VENA_MEMORY_THRESHOLD=104857600 # Threshold for buffer size before activating backpressure (100MB default)
VENA_MIN_UPLOAD_RATE=5242880    # Minimum upload rate before pausing stream (5MB/s default)
VENA_STREAM_BACKOFF=2000        # Delay time in ms before resuming paused streams (2 seconds default)

# Adaptive Backpressure Settings (Advanced)
VENA_ADAPTIVE_BACKPRESSURE=true  # Use adaptive backpressure based on historical upload rates
VENA_ADAPTIVE_THRESHOLD_FACTOR=0.7  # Apply backpressure when rate drops below 70% of average
VENA_ADAPTIVE_BACKOFF_MIN=0.5  # Minimum backoff time multiplier
VENA_ADAPTIVE_BACKOFF_MAX=2.0  # Maximum backoff time multiplier

# Stall Detection Settings
VENA_STALL_DETECTION=true  # Enable upload stall detection
VENA_STALL_THRESHOLD=3  # Number of intervals with no progress before considering stalled

# Memory Monitoring Settings
VENA_MEMORY_MONITORING=true  # Enable memory usage monitoring during uploads
VENA_MEMORY_WARNING_THRESHOLD=1073741824  # Warning threshold in bytes (1GB default)
VENA_MEMORY_CRITICAL_THRESHOLD=1610612736  # Critical threshold in bytes (1.5GB default)
VENA_MEMORY_CHECK_INTERVAL=5000  # Memory check interval in milliseconds (5 seconds default)

# Source directory for CSV files
VENA_SOURCE_DIRECTORY=C:/vena/import_files

# File Mapping 1: Revenue data
VENA_FILE_PATTERN_1=revenue_*.csv
VENA_TEMPLATE_ID_1=revenue_template_id
VENA_PROCESS_TYPE_1=single

# File Mapping 2: Utilization data
VENA_FILE_PATTERN_2=FY*_UTILIZATION.csv
VENA_TEMPLATE_ID_2=utilization_template_id
VENA_PROCESS_TYPE_2=single

# File Mapping 3: Expenses data (multi-step process)
VENA_FILE_PATTERN_3=expenses_*.csv
VENA_TEMPLATE_ID_3=expenses_template_id
VENA_PROCESS_TYPE_3=multi

# Steps for expenses data
VENA_STEP_INPUT_ID_3_1=step1_input_id
VENA_STEP_FILE_PATTERN_3_1=expenses_step1_*.csv
VENA_STEP_INPUT_ID_3_2=step2_input_id
VENA_STEP_FILE_PATTERN_3_2=expenses_step2_*.csv

# You can add more mappings by incrementing the number:
# VENA_FILE_PATTERN_4=another_*.csv
# VENA_TEMPLATE_ID_4=another_template_id
# VENA_PROCESS_TYPE_4=single

# Scheduling Configuration (for Windows Task Scheduler)
# Format is similar to cron: minute hour day month dayofweek
VENA_TASK_NAME=VenaETLImport
VENA_SCHEDULE_MINUTE=0
VENA_SCHEDULE_HOUR=5
VENA_SCHEDULE_DAY=1
VENA_SCHEDULE_MONTH=*
VENA_SCHEDULE_DAYOFWEEK=*
VENA_RUN_LEVEL=HighestAvailable  # Use 'LeastPrivilege' for standard user
VENA_TIME_LIMIT=PT1H             # ISO8601 duration format (PT1H = 1 hour)
# This default schedule runs at 5:00 AM on the 1st day of every month

# Additional schedule examples:
# - Daily at 10:30 PM: MINUTE=30, HOUR=22, DAY=*, MONTH=*, DAYOFWEEK=*
# - Every Monday at 7 AM: MINUTE=0, HOUR=7, DAY=*, MONTH=*, DAYOFWEEK=1
# - Every 15th and 30th at 9 AM: MINUTE=0, HOUR=9, DAY=15,30, MONTH=*, DAYOFWEEK=*
# - First day of every quarter: MINUTE=0, HOUR=6, DAY=1, MONTH=1,4,7,10, DAYOFWEEK=*
